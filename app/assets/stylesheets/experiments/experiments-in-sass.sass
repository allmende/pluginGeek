// Experiments in SASS
//
// Our very own variables
$body-fonts: 'proxima-nova', Arial, 'Helvetica Neue', Helvetica, sans-serif
$text: #393939            // primary text
$text-secondary: #7f7f7f  // muted, secondary text
$radius: 3px              // border radii

// Colors from the Owl Geek
$blue: #126E9D
$green: #93CF29

// Color assignments
$primary: $blue
$secondary: $green

$border-primary: $primary
$border-secondary: $secondary
$border-tertiary: #ccc

$services-background: lighten($secondary, 32%)

// Colors hightlighting a project's last updated at activity
$very-high-activity: darken($green, 8%)
$high-activity: $text-secondary
$medium-activity: $text-secondary
$low-activity: $text-secondary
$very-low-activity: $text-secondary

// general
body
  font-family: $body-fonts
  font-size: 100%
  line-height: 1.618
  color: $text

  background: image-url('backgrounds/compressed/debut_light.png') // 5

  // Additional backgrounds
  // background: image-url('backgrounds/compressed/subtle_freckles.png') // 4
  // background: image-url('backgrounds/compressed/light_alu.png') // 3, darker
  // background: image-url('backgrounds/compressed/light_wool.png') // 2, a little too light
  // background: image-url('backgrounds/compressed/snow.png') // 2, very light, almost no structure
  // background: image-url('backgrounds/compressed/subtle_dots.png') // 2, like millimeterpapier
  // background: image-url('backgrounds/compressed/white_brick_wall.png') // 1, building blocks, a little to extreme
  // background: image-url('backgrounds/compressed/clean_textile.png') // 1
  // background: image-url('backgrounds/compressed/diagonal-noise.png') // 1, pretty dark
  // background: image-url('backgrounds/compressed/grilled.png') // -1, fishbone

// unordered lists
ul
  list-style: none
  padding: 0
  margin: 0

// links
a
  text-decoration: none
  color: $primary
  cursor: pointer
  &:link, &:hover, &:active, &:visited
    color: $primary

// Icon / Webfont Icons
i
  margin-right: 4px

// Containers and Rows
#root,
#footer
  @include outer-container

// Independent rows
// same page => list them in one line
.row,
#navigation,
#content,
.footer,
.search,
.categories-wrapper, .repos-wrapper,
#flash-messages
  @include row

.category-details,
.repo-details, .readme-wrapper, .alternatives, .parents-and-children,
.formtastic,
.header-wrapper,
.marketing-text
  @include span-columns(12)

// header
.header-wrapper
  padding-top: 3px
  border-bottom: 1px dashed $border-primary
  margin-bottom: 10px

.branding
  @include span-columns(6)
  margin-top: 2px
  cursor: pointer

// navigation
.navigation
  margin-top: 8px
  &.web-navigation
    @include span-columns(4)
  &.mobile-navigation
    @include span-columns(2)

  // primary languages (web, mobile)
  .primary
    display: block
    font-weight: 800
    padding-bottom: 2px
    border-bottom: 1px dashed $border-primary

  // secondary languages (javascript, ruby, webdesign, ios, android)
  ul.secondary
    margin-top: 2px
    li
      display: inline
      margin: 0 10px 0 0
      padding: 0 10px 0 0
      border-right: 1px dashed $text-secondary
      &:last-child
        border-right: none

  // borders applying to both
  .primary, .secondary li
    &.active a
      border-bottom: 2px solid $border-primary
    a:hover
      border-bottom: 2px solid $border-primary

// marketing text
.marketing-text
  text-rendering: optimizeLegibility
  text-align: center
  margin-top: 0.25rem
  margin-bottom: 1.5rem // quick fix

  .first
    font-size: 2.058rem
    font-weight: 300
    .type
      font-size: 2.058rem
      font-weight: 600

  .second
    display: inline
    font-size: 1.618rem
    font-weight: 600
    border-bottom: 1px solid $border-primary
    &:hover
      border-bottom: 2px solid $border-primary

// search field spanning entire page
.search
  width: 100%
  padding: 10px 14px
  font-size: 1.272rem
  color: #444

  border: 3px solid #ccc
  @include box-shadow(inset 0 2px 3px rgba(0,0,0,.05))
  border-radius: $radius

  &:focus
    outline: none
    background: #fff
    border-color: $border-primary

// sorting
ul.sort-list
  font-size: 0.875rem
  color: $text-secondary
  text-align: right

  li
    @extend a
    display: inline
    padding: 0
    margin: 0 8px
    cursor: pointer
    &:last-of-type
      margin-right: 0
    &.active
      border-bottom: 1px solid $border-primary
    &:hover
      border-bottom: 2px solid $border-primary

  // divider in sort-list
  .divider:before
    content: "or"

// box
.box
  padding: 0.725rem 0.875rem

  font-size: 0.875rem
  line-height: 20px // all lines same height, regardless of font-size
  color: $text

  border-radius: $radius

  background-color: rgba(255,255,255,0.75) // lighten background
  //                                       // (sync with primary and secondary text colors)

  @include box-shadow(0 1px 3px rgba(0,0,0,0.25))

// box spanning six columns
.half-box
  @extend .box

  @include span-columns(6)
  @include nth-omega(2n)

  margin-bottom: 10px // spacing between rows of half boxes

// box spanning twelve columns
.full-box
  @extend .box
  @include row

// show all link
.show-all
  @extend .full-box
  margin-top: -4px // reset - 4px
  margin-bottom: 4px

  line-height: 54px // vertical centering
  font-size: 1rem
  font-weight: 600

  text-align: center
  color: $primary
  cursor: pointer

// truncation via trunk8
.js-read-more,
.js-read-less
  cursor: pointer

// categories in overview
.categories-wrapper .category
  @extend .half-box
  min-height: 139px

  .full-name
    display: block
  .name
    font-size: 1rem
    line-height: 20px // like language-list and stars
    font-weight: 600
  .language-list,
  .stars
    float: right
    color: $text-secondary
    line-height: 20px
    margin-left: 6px
  .popular-repos
    display: block
    color: $text-secondary
  .description
    display: block

// repos in overview
.repos-wrapper .repo
  @extend .half-box
  min-height: 119px

  .full-name
    display: block
  .name
    font-size: 1rem
    line-height: 20px // like stars
    font-weight: 600
  .owner
    color: $text-secondary
  .stars
    float: right
    margin-left: 6px
    line-height: 20px
    color: $text-secondary
  .description
    display: block
    min-height: 44px
  .homepage-link
    display: block
  .activity
    &:before
      content: 'Updated \2192 \a0'
      color: $text-secondary

// colors hightlighting a project's most recent timestamp on Github
.activity
  abbr
    border-bottom: none
  &.very-high
    color: $very-high-activity
  &.high
    color: $high-activity
  &.medium
    color: $medium-activity
  &.low
    color: $low-activity
  &.very-low
    color: $very-low-activity

// category details
.category-details
  font-size: 0.9375rem
  .name
    font-size: 1.618rem
    font-weight: 600
  .details
    .language-list,
    .stars
      margin-left: 1rem
      color: $text-secondary
    .edit-link
      margin-left: 1rem
  .description
    display: block

// Guides for drafting a category's descriptions
// (displayed when editing category)
.descriptions-of-repos
  table
    border: 1px solid $border-tertiary
    th, td
      padding: 0.2em 0.4rem
      border-right: 1px solid $border-tertiary
      text-align: left
    tr:nth-child(odd)
      background: #e9e9e9
  // Table cells
  .repo
    .name
      font-weight: 600
    .score
      text-align: right
      font-family: monospace
      font-size: 1rem
    .description

// repo details
.repo-details
  font-size: 0.9375rem
  .name-and-owner
    font-size: 1.618rem
    font-weight: 600
    i
      margin-right: 9px
    .name
    .owner
      font-weight: 300
  .details
    > *
      margin-left: 1rem // settled after careful experimentation :-D
    .stars
      color: $text-secondary
    .star-on-github-link
      position: relative
      top: 4px
      padding-left: 1px // right one added by iframe width
    .edit-link
  .description
    display: block
  .homepage-url
  .activity
    margin-left: 1rem

// headers at repo-details
.section-header
  @include row
  margin-top: 1.618rem
  margin-bottom: 4px

  font-size: 0.875rem
  color: $text-secondary

  .primary
    font-size: 1.272rem
    color: #333
    margin-left: 0
  > *
    margin-left: 0.5rem
  .sort-list
    display: inline
    float: right

// readme at repo-details
.readme-wrapper
  @extend .full-box
  margin-top: 1rem

.readme
  display: block
  overflow: hidden

.readme-max-height
  max-height: 380px

.readme-auto-height
  height: auto

.toggle-readme
  float: left
  margin-top: 0.5rem

// current-user details for the logged in user, only displays then
.current-user
  @extend .row
  margin-top: 4px
  margin-bottom: -10px

  font-size: 0.875rem
  line-height: 32px // for avatar layouting

  @include span-columns(6)
  @include shift(6)

  .happy-day
    color: $text-secondary

  // wrapper for user details
  .avatar-and-name
    .name
      margin-left: 6px

    // gravatar, displayed with rounded corners
    // source: www.bram.us/sandbox/roundedcorners/
    .avatar
      float: left // hack to make displaying work
      $avatar-size: 28px
      width: $avatar-size
      height: $avatar-size
      background-size: $avatar-size $avatar-size
      background-repeat: no-repeat

      border-radius: 3px

  .logout
    float: right


// login page prompting user to sign in via github
.login-details
  @include span-columns(6)

  .github-login-link
    font-size: 1.272rem
    font-weight: 600
    text-decoration: underline
    i
      margin-right: 7px

// headline in all views
.headline
  display: block
  margin-top: 4px
  font-size: 2.058rem
  font-weight: 600
  line-height: 2rem

// flash messages
.flash-message
  padding: 0.4rem 0 0.35rem 1rem
  margin-bottom: 0.5rem
  border-radius: $radius
  background: lighten($primary, 50%)
  @include box-shadow(0 2px 3px rgba(0,0,0,0.22))

  cursor: pointer // close on click
  .close
    float: right
    padding: 0.85rem 1rem
    line-height: 0 // adjust height
    font-size: 1.272rem
    color: #999
    text-decoration: underline

// formtastic changes
.formtastic
  padding: 0.75rem 0
  label
    font-weight: 600
  input, textarea
    font-family: $body-fonts
    width: 75% !important
    padding: 3px 6px
    border-radius: 2px
    border: 2px solid #ccc
    &[disabled]
      background: #eee
    &:focus
      outline: none
      border-color: $border-primary
  .inline-hints
    background: lighten($primary, 50%)
    padding: 4px 10px
    font-size: 0.875rem
    color: #555 !important
    border-radius: $radius

// services
.services-wrapper .service
  @extend .half-box
  background: $services-background
  color: #151515

  .name
    display: block
    font-size: 1rem
    font-weight: 600

  .url
    display: block

  .pitch
    display: block

.services-wrapper
  @extend .row

// add new repo
.add-repo-wrapper
  .name-and-owner
    font-size: 1.618rem
    font-weight: 600
    i
      margin-right: 9px

// buttons
.button
  padding: 0.5rem 1rem !important
  background: $primary
  color: #f9f9f9 !important
  cursor: pointer
  font-weight: 400 !important

  border: 1px solid lighten($border-primary, 10%) !important
  border-radius: $radius !important
  @include box-shadow(0 1px 4px rgba(0,0,0,.25))

  &:hover
    background: lighten($primary, 5%)

// secondary footer
@import "compass/layout/sticky-footer"
@include sticky-footer(248px, "#root", "#root_footer", "#footer")

$footer-spacing: 8px
$footer-borders: 1px dashed #999

.footer
  @include span-columns(12)
  margin-top: 12px
  border-top: $footer-borders
  padding-top: 12px

  font-size: 0.875rem

  // links in footer
  ul.links
    float: left
    li
      display: inline
      padding-right: $footer-spacing
      margin-right: $footer-spacing
      border-right: $footer-borders
      &:last-of-type
        border-right: none

  // greeting and maker's name in footer
  .greeting
    float: right
    span
      padding-left: $footer-spacing
      margin-left: $footer-spacing
      border-left: $footer-borders
      &:first-of-type
        border-left: none
